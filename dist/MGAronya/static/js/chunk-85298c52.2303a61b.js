(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85298c52"],{"195e":function(t,e,s){},"1a88":function(t,e,s){"use strict";s("195e")},4751:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"rf pic"},[e("div",{staticClass:"hh line"}),e("div",{staticClass:"hh"}),e("div",{staticClass:"avatar"},[e("img",{attrs:{src:t.imgurl}})]),e("div",{staticClass:"bott"},[e("div",[t._v(t._s(t.user.Name))]),e("div",{staticClass:"email"},[t._v(t._s(t.user.Email))]),e("div",{staticClass:"signature"},[t._v(t._s(t.user.Hobby))])])])},a=[],r=s("365c"),n={data(){return{user:{},baseurl:"http://106.53.120.252:81/",imgurl:""}},props:["id","userprops"],methods:{async oneUserGet(){if(void 0!==this.userprops.Name)this.user=this.userprops,this.imgurl=this.baseurl+this.user.Icon;else{let t=await Object(r["g"])(this.id);200==t.code&&(this.user=t.data.user,this.imgurl=this.baseurl+this.user.Icon)}}},created(){this.oneUserGet()}},c=n,o=(s("1a88"),s("2877")),l=Object(o["a"])(c,i,a,!1,null,"15d69124",null);e["a"]=l.exports},"6e5b":function(t,e,s){},8349:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"con"},[e("div",{staticClass:"headline"},[t._v(t._s(t.post.title))]),e("div",{staticClass:"ques"},[t._v("The Question")]),e("mavon-editor",{staticStyle:{"min-height":"600px"},attrs:{previewBackground:"#eee",placeholder:"还没有输入呢",defaultOpen:"preview",toolbarsFlag:!1,subfield:!1},model:{value:t.post.content,callback:function(e){t.$set(t.post,"content",e)},expression:"post.content"}}),e("div",{staticClass:"ques"},[e("span",[t._v("All Answer")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.answerVisible=!0,t.threadFlag=!1}}},[t._v("回答")])],1),t.answerVisible?e("el-card",{staticClass:"answerCon"},[e("div",{staticClass:"firRow"},[e("span",[t._v("发布回答")]),e("i",{staticClass:"el-icon-close",on:{click:function(e){t.answerVisible=!1,t.threadFlag=!0}}})]),e("div",[e("mavon-editor",{attrs:{placeholder:t.placeholder},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),e("el-button",{staticClass:"sumbitBtn",attrs:{type:"primary"},on:{click:t.submitThread}},[t._v("提交")])],1)]):t._e(),t.threadFlag?e("div",t._l(t.threads,(function(s){return e("div",{key:s.id},[e("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"thre"},[e("mavon-editor",{staticClass:"md",attrs:{defaultOpen:"preview",toolbarsFlag:!1,subfield:!1},model:{value:s.content,callback:function(e){t.$set(s,"content",e)},expression:"thread.content"}}),e("UserCard",{staticClass:"ab",attrs:{id:s.user_id,userprops:"{}"},nativeOn:{click:function(e){return t.gotoMsg(s.user_id)}}}),t.email===s.email?e("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){return t.threadDelete(t.post.id,s.id)}}},[t._v("删除跟帖")]):t._e()],1)])})),0):t._e(),e("div",{staticClass:"chengkai"})],1)},a=[],r=s("365c"),n=s("b2d8"),c=(s("64e1"),s("4751")),o=(s("c350"),{data(){return{email:"",post:{},threads:[],answerVisible:!1,content:"",threadFlag:!0,placeholder:"Ctrl + Alt + c 是代码块, F10开启全屏编辑模式"}},methods:{async posteGet(){let t=await Object(r["h"])(this.$route.params.id);200==t.code&&(this.post=t.data.post,this.threads=t.data.threads,console.log(this.post))},async userGet(){let t=await Object(r["j"])();this.email=t.data.user.Email},async submitThread(){if(this.content.length<5)return this.$message.error("内容太短了！");let t=await Object(r["a"])(this.$route.params.id,{content:this.content});return 200==t.code?(this.answerVisible=!1,this.threadFlag=!0,this.posteGet(),this.content="",this.$message.success("跟帖成功！")):void 0},gotoMsg(t){this.$router.push({name:"usermsg",params:{id:t}})},async threadDelete(t,e){const s=await this.$confirm("此操作将永久删除该跟帖,是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t);if("confirm"!==s)return this.$message.info("已经取消删除");let i=await Object(r["d"])(t,e);return 200===i.code?(this.posteGet(),this.$message.success("删除跟帖成功！")):void 0}},created(){this.posteGet(),this.userGet()},components:{mavonEditor:n["mavonEditor"],UserCard:c["a"]}}),l=o,u=(s("92f0c"),s("2877")),d=Object(u["a"])(l,i,a,!1,null,"ed031e8e",null);e["default"]=d.exports},"92f0c":function(t,e,s){"use strict";s("6e5b")},c350:function(t,e,s){}}]);